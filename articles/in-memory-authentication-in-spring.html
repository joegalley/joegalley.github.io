---
layout: default
title: 'Spring Security: In-Memory Authentication'
tags: spring-boot java
language-highlights:
 - java
---
			<div class="page-title">Spring Security: In-Memory Authentication</div>
			<div>
				<span class="tags">Tags:
					<span class="article-tag tag-spring-security">Spring Security</span>
					<span class="article-tag tag-spring">Spring Boot</span>
					<span class="article-tag tag-java">Java</span>
				</span>
			</div>

			<hr>
	
			<p>
				<b>Quick Summary: Extend <code>WebSecurityConfigurerAdapter</code> and call <code>inMemoryAuthentication</code>.</b>
			</p>

	
			<p>
				<span class="drop-caps">A</span> common way of performing error-handling in Spring Boot is by using the <code>@ExceptionHandler</code>
				and <code>@ControllerAdvice</code> annotations. However, handling errors in this way has one large downside:
				it is only able to handle errors at the Controller level and below.  For example, if you have an <code>ExceptionHandler</code>
				listening for <code>NullPointerException</code>s and one is thrown from within a Controller or a Service, then your method will
				handle the exception.  However, if an unhandled exception is thrown from within
				a <code>Filter</code> class or while rendering one your JSP pages, then you will probably see the default container
				(aka Tomcat/Jetty) error page:
			</p	>
			<p>
				Not only is this page very ugly to present to your end users, but it also may reveal information through the 
				stace trace that is not indented to be seen.
			</p>
				There exists a great way in Spring Boot to handle errors thrown at <i>all</i> levels of the application (and 
				prevent your users from ever seeing the default error page): the <b>EmbeddedServletContainerCustomizer</b> interface.				
			</p>

			<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@EnableWebSecurity</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebSecurityConfig</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>

<span class="o">...</span>

 <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configureGlobal</span><span class="o">(</span><span class="n">AuthenticationManagerBuilder</span> <span class="n">auth</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">auth</span>
            <span class="o">.</span><span class="na">inMemoryAuthentication</span><span class="o">()</span>
            <span class="o">.</span><span class="na">withUser</span><span class="o">(</span><span class="s">&quot;testUsername&quot;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">password</span><span class="o">(</span><span class="s">&quot;testPassword&quot;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">roles</span><span class="o">(</span><span class="s">&quot;USER&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    
<span class="o">...</span>

<span class="o">}</span>
</pre>
</div>
</td>
</tr>
</table>